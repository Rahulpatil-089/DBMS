//Cursor

create table N_RollCall(rollno int,name varchar(20));
insert into N_RollCall(rollno,name) values(1,'Pragati'),(2,'Ruhi'),(3,'Adi');
select *from N_RollCall;
create table O_RollCall(rollno int,name varchar(20));
insert into O_RollCall(rollno,name) values(1,'Pragati'),(4,'Ved');
select *from O_RollCall;

drop procedure if exists mycursor1;

delimiter //

CREATE PROCEDURE mycursor1()
BEGIN
    DECLARE done INT DEFAULT 0;
    DECLARE  c_rollno int;
    DECLARE  c_name char(20);

    DECLARE  c_studentN CURSOR  for SELECT rollno,name FROM O_RollCall where rollno not in(select rollno from N_RollCall);

    DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = 1;

    BEGIN
        OPEN c_studentN;
           read_loop:LOOP
               FETCH c_studentN into c_rollno, c_name;  
   
               IF done = 1 THEN
                  LEAVE read_loop;
               END IF;          
   
              insert into N_RollCall(rollno,name) values(c_rollno, c_name);

           END LOOP;
           CLOSE c_studentN;
    END;
END;

//

delimiter ;

call mycursor1();
select *from N_RollCall;
select *from O_RollCall;